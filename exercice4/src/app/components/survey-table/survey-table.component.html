<div class="mat-elevation-z8">
  <div style="padding: 16px; display: flex; gap: 16px; align-items: center;">
    <mat-form-field>
      <mat-label>Start Date</mat-label>
      <input matInput [matDatepicker]="startPicker" [(ngModel)]="startDate" (ngModelChange)="applyFilter()">
      <mat-datepicker-toggle matIconSuffix [for]="startPicker"></mat-datepicker-toggle>
      <mat-datepicker #startPicker></mat-datepicker>
    </mat-form-field>
    <mat-form-field>
      <mat-label>End Date</mat-label>
      <input matInput [matDatepicker]="endPicker" [(ngModel)]="endDate" (ngModelChange)="applyFilter()">
      <mat-datepicker-toggle matIconSuffix [for]="endPicker"></mat-datepicker-toggle>
      <mat-datepicker #endPicker></mat-datepicker>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Status</mat-label>
      <mat-select [(ngModel)]="statusFilter" (ngModelChange)="applyFilter()">
        <mat-option value="">All</mat-option>
        <mat-option value="active">Active</mat-option>
        <mat-option value="inactive">Inactive</mat-option>
        <mat-option value="completed">Completed</mat-option>
      </mat-select>
    </mat-form-field>
    <button mat-raised-button (click)="clearFilters()">Clear Filters</button>
  </div>
  
  <div *ngIf="loading" style="display: flex; justify-content: center; padding: 40px;">
    <mat-spinner></mat-spinner>
  </div>
  
  <div *ngIf="error" style="padding: 20px; text-align: center; color: #f44336; background-color: #ffebee; border-radius: 4px; margin: 16px;">
    {{error}}
  </div>
  
<table *ngIf="!loading && !error" mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">

  <!--- Note that these columns can be defined in any order.
        The actual rendered columns are set as a property on the row definition" -->
  <!-- id Column -->
  <ng-container matColumnDef="id">
    <th mat-header-cell *matHeaderCellDef (click)="onSortChange('id', $event)" style="cursor: pointer;"> 
      No. 
      <span *ngIf="getSortDirection('id')" [innerHTML]="getSortDirection('id') === 'asc' ? '↑' : '↓'"></span>
      <span *ngIf="getSortIndex('id') > 0" style="font-size: 10px;">{{getSortIndex('id')}}</span>
    </th>
    <td mat-cell *matCellDef="let element"> {{element.id}} </td>
  </ng-container>

  <!-- name Column -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef (click)="onSortChange('name', $event)" style="cursor: pointer;"> 
      Name 
      <span *ngIf="getSortDirection('name')" [innerHTML]="getSortDirection('name') === 'asc' ? '↑' : '↓'"></span>
      <span *ngIf="getSortIndex('name') > 0" style="font-size: 10px;">{{getSortIndex('name')}}</span>
    </th>
    <td mat-cell *matCellDef="let element"> {{element.name}} </td>
  </ng-container>

  <!-- description Column -->
  <ng-container matColumnDef="description">
    <th mat-header-cell *matHeaderCellDef (click)="onSortChange('description', $event)" style="cursor: pointer;"> 
      description 
      <span *ngIf="getSortDirection('description')" [innerHTML]="getSortDirection('description') === 'asc' ? '↑' : '↓'"></span>
      <span *ngIf="getSortIndex('description') > 0" style="font-size: 10px;">{{getSortIndex('description')}}</span>
    </th>
    <td mat-cell *matCellDef="let element"> {{element.description}} </td>
  </ng-container>

  <!-- assetId Column -->
  <ng-container matColumnDef="assetId">
    <th mat-header-cell *matHeaderCellDef (click)="onSortChange('assetId', $event)" style="cursor: pointer;"> 
      assetId 
      <span *ngIf="getSortDirection('assetId')" [innerHTML]="getSortDirection('assetId') === 'asc' ? '↑' : '↓'"></span>
      <span *ngIf="getSortIndex('assetId') > 0" style="font-size: 10px;">{{getSortIndex('assetId')}}</span>
    </th>
    <td mat-cell *matCellDef="let element"> {{element.assetId}} </td>
  </ng-container>

    <!-- Symbol interval -->
  <ng-container matColumnDef="interval">
    <th mat-header-cell *matHeaderCellDef (click)="onSortChange('interval', $event)" style="cursor: pointer;"> 
      interval 
      <span *ngIf="getSortDirection('interval')" [innerHTML]="getSortDirection('interval') === 'asc' ? '↑' : '↓'"></span>
      <span *ngIf="getSortIndex('interval') > 0" style="font-size: 10px;">{{getSortIndex('interval')}}</span>
    </th>
    <td mat-cell *matCellDef="let element"> {{element.interval}} </td>
  </ng-container>


    <!-- Symbol status -->
  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef (click)="onSortChange('status', $event)" style="cursor: pointer;"> 
      status 
      <span *ngIf="getSortDirection('status')" [innerHTML]="getSortDirection('status') === 'asc' ? '↑' : '↓'"></span>
      <span *ngIf="getSortIndex('status') > 0" style="font-size: 10px;">{{getSortIndex('status')}}</span>
    </th>
    <td mat-cell *matCellDef="let element"> {{element.status}} </td>
  </ng-container>

      <!-- Symbol createdAt -->
  <ng-container matColumnDef="createdAt">
    <th mat-header-cell *matHeaderCellDef (click)="onSortChange('createdAt', $event)" style="cursor: pointer;"> 
      createdAt 
      <span *ngIf="getSortDirection('createdAt')" [innerHTML]="getSortDirection('createdAt') === 'asc' ? '↑' : '↓'"></span>
      <span *ngIf="getSortIndex('createdAt') > 0" style="font-size: 10px;">{{getSortIndex('createdAt')}}</span>
    </th>
    <td mat-cell *matCellDef="let element"> {{element.createdAt | date:'yyyy-MM-dd HH:mm'}} </td>
  </ng-container>

      <!-- Symbol updatedAt -->
  <ng-container matColumnDef="updatedAt">
    <th mat-header-cell *matHeaderCellDef (click)="onSortChange('updatedAt', $event)" style="cursor: pointer;"> 
      updatedAt 
      <span *ngIf="getSortDirection('updatedAt')" [innerHTML]="getSortDirection('updatedAt') === 'asc' ? '↑' : '↓'"></span>
      <span *ngIf="getSortIndex('updatedAt') > 0" style="font-size: 10px;">{{getSortIndex('updatedAt')}}</span>
    </th>
    <td mat-cell *matCellDef="let element"> {{element.updatedAt | date:'yyyy-MM-dd HH:mm'}} </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>
  
  <mat-paginator [pageSizeOptions]="[5, 10, 20]" [pageSize]="10"
                 showFirstLastButtons
                 aria-label="Select page of periodic elements">
  </mat-paginator>
</div>

